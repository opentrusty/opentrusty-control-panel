# OpenTrusty Control Panel Deployment

This package contains the static build of the OpenTrusty Control Panel administration interface.

## Package Contents

- `dist/`: Static assets (HTML, JS, CSS).
- `deploy/install.sh`: Automated installer script.
- `Caddyfile.example`: Recommended Caddy configuration.
- `README.md`: Deployment guide.
- `LICENSE`: Apache 2.0 license.

## Quick Install

```bash
# Run the installer (will prompt for configuration)
sudo ./deploy/install.sh

# Or provide environment variables
sudo OPENTRUSTY_API_URL=https://admin.yourdomain.com/api/v1 \
     OPENTRUSTY_AUTH_URL=https://auth.yourdomain.com \
     ./deploy/install.sh
```

## Manual Deployment

1. Copy the `dist/` directory to your web server's root (e.g., `/var/www/opentrusty-control-panel`).
2. Edit `dist/config.js` to set your API and Auth URLs.
3. Configure your web server to serve `index.html` for all unknown routes (SPA routing).

## Runtime Configuration

The Control Panel uses runtime configuration via `/config.js`. This file is generated by `install.sh` and can be edited manually:

```javascript
window.__OPENTRUSTY_CONFIG__ = {
  API_BASE_URL: "https://admin.yourdomain.com/api/v1",
  AUTH_BASE_URL: "https://auth.yourdomain.com"
};
```

## Example using Caddy

See the included `Caddyfile.example`. You can use it as a starting point:

```bash
cp Caddyfile.example /etc/caddy/Caddyfile
# Edit /etc/caddy/Caddyfile to match your domain
systemctl reload caddy
```
