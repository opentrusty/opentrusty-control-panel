# OpenTrusty Control Panel - Example Caddyfile

console.yourdomain.com {
    # 1. Serve static files from the build output
    root * /var/www/opentrusty-control-panel/dist
    file_server

    # 4. Handle Single Page Application (SPA) routing
    try_files {path} /index.html

    # Security Headers
    header {
        # Disable FLoC
        Permissions-Policy "interest-cohort=()"
        # Prevent XSS
        X-XSS-Protection "1; mode=block"
        # Prevent MIME sniffing
        X-Content-Type-Options "nosniff"
        # Referrer Policy
        Referrer-Policy "strict-origin-when-cross-origin"
        # Content Security Policy
        # Adjust connect-src to allow connections to your admin and auth domains
        Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://admin.yourdomain.com https://auth.yourdomain.com;"
    }
}
